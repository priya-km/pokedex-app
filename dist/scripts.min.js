let pokemonRepository=function(){let e=[],t=document.querySelector(".pokemon-list"),n="https://pokeapi.co/api/v2/pokemon/?limit=150",o=document.querySelector(".search"),i=document.querySelector(".modal-dialog");function r(t){e.push(t)}function a(e){l(e).then((function(){let n=document.createElement("li");$(n).addClass("col");let o=document.createElement("button"),i=document.createElement("h2");o.appendChild(i),i.innerText=e.name,$(o).addClass("button-class"),o.setAttribute("data-toggle","modal"),o.setAttribute("data-target",".modal");let r=document.createElement("img");r.src=e.frontSprite,o.appendChild(r),n.appendChild(o),t.appendChild(n),o.addEventListener("click",(function(){m(e)}))}))}function l(e){let t=e.detailsUrl;return fetch(t).then((function(e){return e.json()})).then((function(t){e.frontSprite=t.sprites.front_default,e.height=t.height,e.types=t.types;let n=[];t.types.forEach((function(e){n.push(e.type.name)})),e.types=n.join(" | ");let o=[];return t.abilities.forEach((function(e){o.push(e.ability.name)})),e.abilities=o.join(" | "),e}))}function d(){t.innerHTML=""}function c(){$(i).addClass("hidden")}function s(e){let n=document.createElement("p");$(n).addClass("error-message"),$(n).addClass("col-5"),n.innerText=e,t.appendChild(n)}function u(t){return e.filter((function(e){let n=e.name.toLowerCase(),o=t.toLowerCase();return n.startsWith(o)}))}function m(e){let t=document.querySelector(".modal-title"),n=document.querySelector(".modal-body");t.innerHTML="",n.innerHTML="Loading Pokemon...",l(e).then((function(){n.innerHTML="",document.querySelector(".modal-title").innerText=e.name.charAt(0).toUpperCase()+e.name.slice(1);let t=document.createElement("img");$(t).addClass("modal-img"),t.src=e.frontSprite;let o=document.createElement("div");$(o).addClass("modal-text");let i=document.createElement("p");i.innerText="Height - "+e.height+"M";let r=document.createElement("p");r.innerText="Types -  "+e.types;let a=document.createElement("p");a.innerText="Abilities - "+e.abilities,n.appendChild(t),n.appendChild(o),o.appendChild(i),o.appendChild(r),o.appendChild(a)}))}return o.addEventListener("input",(function(){let e=u(o.value);d(),0===e.length?s("That Pokemon does not exist."):e.forEach(a)})),window.addEventListener("keydown",(function(e){"Escape"===e.key&&c()})),{add:r,getAll:function(){return e},addKantoPokemon:a,loadList:function(){return fetch(n).then((function(e){return e.json()})).then((function(e){pokemonArray=e.results,pokemonArray.forEach((function(e){r({name:e.name,detailsUrl:e.url})}))})).catch((function(e){d(),c(),s("Error Loading Pokemon, please check your network connection and try again."),console.error(e)}))},loadDetails:l,showDetails:m,filterPokemon:u,removeList:d,hideModal:c,showErrorMessage:s}}();pokemonRepository.loadList().then((function(){pokemonRepository.getAll().forEach((function(e){pokemonRepository.addKantoPokemon(e)}))}));